<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Experimental Robotics Laboratory Third Assignment: scripts/state_machine.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Experimental Robotics Laboratory Third Assignment
   </div>
   <div id="projectbrief">Third assignment for the Experiamental Robotics Laboratory course in the Robotics Engineering Master degree at UNIGE</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_53e6fa9553ac22a5646d2a2b2d7b97a1.html">scripts</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">state_machine.py File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This script handles the state machine's states calling services as he needs. This is the main program.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstate__machine_1_1_move.html">state_machine.Move</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">this class defines the state <a class="el" href="classstate__machine_1_1_move.html" title="this class defines the state Move, the execute is just a sleep to simulate movement.">Move</a>, the execute is just a sleep to simulate movement.  <a href="classstate__machine_1_1_move.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstate__machine_1_1_hyp.html">state_machine.Hyp</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">this class defines the state <a class="el" href="classstate__machine_1_1_hyp.html" title="this class defines the state Hyp, the execute handles the oracle service.">Hyp</a>, the execute handles the oracle service.  <a href="classstate__machine_1_1_hyp.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespaceexpr__rob__lab"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceexpr__rob__lab.html">expr_rob_lab</a></td></tr>
<tr class="memdesc:namespaceexpr__rob__lab"><td class="mdescLeft">&#160;</td><td class="mdescRight">! /usr/bin/env python2 <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6b1c5c125791d51cfe04013e56ffce43"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="state__machine_8py.html#a6b1c5c125791d51cfe04013e56ffce43">state_machine.look_for_clues</a> ()</td></tr>
<tr class="memdesc:a6b1c5c125791d51cfe04013e56ffce43"><td class="mdescLeft">&#160;</td><td class="mdescRight">this function looks for clues  <a href="state__machine_8py.html#a6b1c5c125791d51cfe04013e56ffce43">More...</a><br /></td></tr>
<tr class="separator:a6b1c5c125791d51cfe04013e56ffce43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a138a9604b3153d3b3e72c244b23c8f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="state__machine_8py.html#a1a138a9604b3153d3b3e72c244b23c8f">state_machine.move</a> (a)</td></tr>
<tr class="memdesc:a1a138a9604b3153d3b3e72c244b23c8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">this function return a random room for the robot to move in  <a href="state__machine_8py.html#a1a138a9604b3153d3b3e72c244b23c8f">More...</a><br /></td></tr>
<tr class="separator:a1a138a9604b3153d3b3e72c244b23c8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39739b821e3bc95a07602307f227490f"><td class="memItemLeft" align="right" valign="top"><a id="a39739b821e3bc95a07602307f227490f"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>state_machine.cb</b> (msg)</td></tr>
<tr class="separator:a39739b821e3bc95a07602307f227490f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09292bf01a3a7e410e49deb38ce32042"><td class="memItemLeft" align="right" valign="top"><a id="a09292bf01a3a7e410e49deb38ce32042"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>state_machine.clbk</b> (msg)</td></tr>
<tr class="separator:a09292bf01a3a7e410e49deb38ce32042"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c680ce705e6052fa07c6cece21743d0"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="state__machine_8py.html#a5c680ce705e6052fa07c6cece21743d0">state_machine.main</a> ()</td></tr>
<tr class="memdesc:a5c680ce705e6052fa07c6cece21743d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">this is the main function, it calls the smach state machine, all of the states and a sis to see the state machine graph.  <a href="state__machine_8py.html#a5c680ce705e6052fa07c6cece21743d0">More...</a><br /></td></tr>
<tr class="separator:a5c680ce705e6052fa07c6cece21743d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a01e9c551c8498c6c9beec64922383515"><td class="memItemLeft" align="right" valign="top"><a id="a01e9c551c8498c6c9beec64922383515"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>state_machine.Kitchen</b> = True</td></tr>
<tr class="separator:a01e9c551c8498c6c9beec64922383515"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a96590de4741edbf18d4d572335d3a9"><td class="memItemLeft" align="right" valign="top"><a id="a8a96590de4741edbf18d4d572335d3a9"></a>
list&#160;</td><td class="memItemRight" valign="bottom"><b>state_machine.ID_complete</b> = []</td></tr>
<tr class="separator:a8a96590de4741edbf18d4d572335d3a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fef3d5bafe9d6f6a2bc5644ca5d004c"><td class="memItemLeft" align="right" valign="top"><a id="a1fef3d5bafe9d6f6a2bc5644ca5d004c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>state_machine.resp_hyp</b> = HypothesisResponse</td></tr>
<tr class="separator:a1fef3d5bafe9d6f6a2bc5644ca5d004c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f17421e10de3d97b2858222ce49aa30"><td class="memItemLeft" align="right" valign="top"><a id="a8f17421e10de3d97b2858222ce49aa30"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>state_machine.var</b> = Hint</td></tr>
<tr class="separator:a8f17421e10de3d97b2858222ce49aa30"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This script handles the state machine's states calling services as he needs. This is the main program. </p>
<dl class="section author"><dt>Author</dt><dd>Jacopo Ciro Soncini </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>29/08/2022</dd></dl>
<p>Subscribes to: <br  />
 /complete</p>
<p>Publishes to: <br  />
 /cmd_vel</p>
<p>Services: <br  />
 oracle_solution</p>
<p>Client Services: <br  />
 None</p>
<p>Action Services: <br  />
 Move_base</p>
<p>Description: <br  />
 The state machine has three differente states: Move, <a class="el" href="class_clues.html" title="this class defines the state Clues, the execute subscribes to the hint publisher and handles the hypo...">Clues</a> and Hyp. Move handles the movement of the robot between the rooms. <a class="el" href="class_clues.html" title="this class defines the state Clues, the execute subscribes to the hint publisher and handles the hypo...">Clues</a> looks for the hints Hyp is a state that simply check the /oracle_solution service using the identifier of the hypothesis. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a6b1c5c125791d51cfe04013e56ffce43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b1c5c125791d51cfe04013e56ffce43">&#9670;&nbsp;</a></span>look_for_clues()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def state_machine.look_for_clues </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>this function looks for clues </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"></td><td>None </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: None <br  />
 This function moves the arm up and down while the robots move around, to make sure that the aruco camera on the top of the arm can find the clue in the room. The arm movement is handled with moveit, the angular velocity is sent on /cmd_vel </dd></dl>

</div>
</div>
<a id="a5c680ce705e6052fa07c6cece21743d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c680ce705e6052fa07c6cece21743d0">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def state_machine.main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>this is the main function, it calls the smach state machine, all of the states and a sis to see the state machine graph. </p>
<p>Also calls the publishers and the services. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"></td><td>None </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: None <br  />
 </dd></dl>

</div>
</div>
<a id="a1a138a9604b3153d3b3e72c244b23c8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a138a9604b3153d3b3e72c244b23c8f">&#9670;&nbsp;</a></span>move()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def state_machine.move </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>this function return a random room for the robot to move in </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"></td><td>a, int32 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>: room, string <br  />
 This function checks the value of a; if a == 1 it chooses a random room to move in, sending the values of the goal to the move_base action service. If a is not 1, it sends the home goal. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
